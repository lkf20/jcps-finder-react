/* --- Global Body Style --- */
body {
  background-color: #f8f9fa; /* Light background */
}

/* --- Loader Styles --- */
.loader {
  border: 5px solid #f3f3f3; border-top: 5px solid #3498db; border-radius: 50%;
  width: 40px; height: 40px; animation: spin 1s linear infinite;
  margin: 20px auto; display: none;
}
@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

/* --- Offcanvas Styles --- */
#column-selection-form h6 {
  font-size: 0.85rem; border-bottom: 1px solid #dee2e6; padding-bottom: 0.25rem; margin-bottom: 0.75rem !important;
}

/* ==========================================================================
 BASE STYLES for Components (Used by both Table and Card unless overridden)
 ========================================================================== */

/* --- Rating Circle Styles (Base) --- */
.rating-circle, .rating-circle-na {
  display: inline-flex; align-items: center; justify-content: center;
  border-radius: 50%; line-height: 1; text-align: center; font-weight: bold;
  flex-shrink: 0; /* Prevent shrinking */
  vertical-align: middle; /* Align with adjacent text */
}
.rating-circle {
  width: 40px; height: 40px; background-color: #9CCC65; color: white; font-size: 1rem;
}
.rating-circle-na {
  width: 40px; height: 40px; background-color: #e0e0e0; color: #757575; font-size: 0.9rem; font-weight: normal;
}

/* --- Base Diversity Chart & Legend Styles --- */
.diversity-container {
  /* This div wraps canvas and legend placeholder in the *old* format() output for TABLE view */
  /* Styles here apply primarily to TABLE view or as fallback */
   display: flex;
   align-items: center;
   justify-content: center; /* Center items if container is wider */
   min-width: 250px; /* Default min width for table view */
   vertical-align: middle; /* Align container within table cell */
}
.diversity-chart-canvas { /* Base style for canvas elements if they get this class */
  display: block;
  aspect-ratio: 1 / 1; /* For table view, can be useful */
  flex-shrink: 0;
  /* Default sizes for TABLE VIEW if not overridden by component's parent div style */
  /* width: 80px; */ /* Now mostly controlled by parent div or inline style */
  /* height: 80px; */
}

/* Base styles for the UL that contains legend items (used by DiversityLegend.jsx) */
ul.diversity-legend-list {
  list-style: none; padding: 0; margin: 0;
  /* line-height: 1.3;  */
  /* Base line-height for legend items */
}
/* Base styles for legend items (LI) */
ul.diversity-legend-list li {
  display: flex; align-items: center;
  /* margin-bottom: 1px; -- Default, can be overridden by Bootstrap utilities like mb-0 */
  white-space: nowrap; /* Prevents wrapping of the whole li content */
}

/* Base styles for the color swatch span */
ul.diversity-legend-list li .legend-color-box {
  width: 10px; height: 10px; display: inline-block;
  border: 1px solid #ccc; /* Border for color boxes */
  flex-shrink: 0;
  /* margin-right: 0.4rem; -- Default, can be overridden by Bootstrap utilities like me-1 */
}
/* Base styles for the label part of a legend item */
ul.diversity-legend-list li .legend-label {
  flex-grow: 1; /* Allows label to take available space */
  overflow: hidden; text-overflow: ellipsis; /* Good for long labels */
  padding-right: 0.25rem;
  height: auto;

  /* font-size and color will come from component or .text-muted */
}
/* Base styles for the value part of a legend item */
ul.diversity-legend-list li .legend-value {
  font-weight: 500; /* Good for emphasizing value */
  white-space: nowrap; flex-shrink: 0;
  margin-left: 0.25rem;
  /* font-size and color will come from component or .text-muted */
}


/* ==========================================================================
 Table View Specific Styles (#results-output)
 ========================================================================== */

/* General Table Alignment & Sizing */
#results-output.table-responsive { overflow-x: auto; }
#results-output table th { text-align: center; vertical-align: bottom; padding-bottom: 0.75rem; }
#results-output table td { text-align: center; vertical-align: middle; padding-top: 0.85rem; padding-bottom: 0.85rem; position: relative; overflow: visible; }
#results-output table td:first-child { text-align: left; }
#results-output tbody tr:hover { background-color: #e9ecef; }

/* School Name & Link (Table) */
#results-output table td:first-child a { color: #00796B; font-size: 1.1rem; font-weight: 600; text-decoration: none; transition: color 0.2s ease-in-out, text-decoration 0.2s ease-in-out; }
#results-output table td:first-child a:hover { color: #004D40; text-decoration: underline; }
#results-output table td:first-child .d-flex { line-height: 1.1; }
#results-output table td:first-child .bi-geo-alt-fill { font-size: 0.9rem; vertical-align: middle; color: #6c757d; transition: color 0.2s ease-in-out; }
#results-output table td:first-child a:hover .bi-geo-alt-fill { color: #00796B; }

/* Report Card Button (Table) */
#results-output table td .btn-outline-primary { color: #004D40; border-color: #004D40; transition: all 0.15s ease-in-out; }
#results-output table td .btn-outline-primary:hover { color: #ffffff; background-color: #004D40; border-color: #004D40; }
#results-output table td .btn-outline-primary:hover i { color: #ffffff; }

/* General Links (Table) */
#results-output table td a:not(.btn) { text-decoration: none; }

/* Rating Circle inherits base style, size is already 40px */

/* Diversity Chart/Legend (Table) */
/* If using formatDisplayValue which returns a .diversity-container for tables: */
#results-output table td .diversity-container {
  /* Base .diversity-container styles apply */
  /* You might want to enforce a specific chart size for table view here IF the component doesn't already */
}
#results-output table td .diversity-container .diversity-chart-canvas {
  width: 80px !important; /* Example: Enforce size for table view if needed */
  height: 80px !important;
  margin-right: 0.5rem;
}
#results-output table td .diversity-container ul.diversity-legend-list {
  /* Table view specific legend list styling if needed */
  text-align: left;
  flex-grow: 1;
  padding-left: 0.5rem;
}
#results-output table td .diversity-container ul.diversity-legend-list li {
  /* Table view specific legend item styling */
  font-size: 0.75rem; /* Example */
}


/* ==========================================================================
 Card View Specific Styles (#results-output-cards)
 ========================================================================== */

#results-output-cards .card { border: 1px solid #e0e0e0; padding: 0.5rem; }

/* --- Standard List Item in Card --- */
#results-output-cards .list-group-item:not(.school-card-diversity-item) { /* Updated selector to exclude new diversity item class */
  background-color: transparent; border-bottom: 1px solid #f0f0f0; font-size: 0.9rem;
  display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 1rem;
}
#results-output-cards .list-group-item:not(.school-card-diversity-item):last-child { border-bottom: none; }
#results-output-cards .list-group-item:not(.school-card-diversity-item) span:first-child { font-weight: 500; color: #555; padding-right: 1rem; flex-shrink: 0; line-height: 1.4; }
#results-output-cards .list-group-item:not(.school-card-diversity-item) span:last-child { text-align: right; flex-grow: 1; min-height: 30px;}

/* School Name (Card Header Area) */
#results-output-cards .card-body .card-title a { font-size: 1.15rem; font-weight: 600; color: #004D40; text-decoration: none; transition: all 0.2s ease-in-out; }
#results-output-cards .card-body .card-title a:hover { color: #00796B; text-decoration: underline; }
#results-output-cards .card-body .card-title .d-flex { font-size: 0.85rem; }
#results-output-cards .card-body .card-title .bi-geo-alt-fill { font-size: 0.85rem; color: #6c757d; transition: color 0.2s ease-in-out; vertical-align: middle; }
#results-output-cards .card-body .card-title a:hover .bi-geo-alt-fill { color: #00796B; }

/* Report Card Button (Card - Standard LI) */
#results-output-cards .list-group-item:not(.school-card-diversity-item) .btn { padding: 0.1rem 0.4rem; font-size: 0.75rem; color: #004D40; border-color: #004D40; transition: all 0.15s ease-in-out; }
#results-output-cards .list-group-item:not(.school-card-diversity-item) .btn:hover { color: #ffffff; background-color: #004D40; border-color: #004D40; }
#results-output-cards .list-group-item:not(.school-card-diversity-item) .btn i { font-size: 0.7rem; vertical-align: baseline; }
#results-output-cards .list-group-item:not(.school-card-diversity-item) .btn:hover i { color: #ffffff; }

/* Rating Circle (Card - Standard LI) */
#results-output-cards .list-group-item:not(.school-card-diversity-item) span:last-child .rating-circle,
#results-output-cards .list-group-item:not(.school-card-diversity-item) span:last-child .rating-circle-na {
  width: 30px !important; height: 30px !important; /* Smaller size */
  font-size: 0.85rem !important; padding: 0 !important;
}
#results-output-cards .list-group-item:not(.school-card-diversity-item) span:last-child .rating-circle { background-color: #9CCC65 !important; color: white !important; font-weight: bold !important; }
#results-output-cards .list-group-item:not(.school-card-diversity-item) span:last-child .rating-circle-na { background-color: #e0e0e0 !important; color: #757575 !important; font-weight: normal !important; font-size: 0.75rem !important; }


/* --- Card View NEW Diversity Section Styles --- */
/* The LI containing the entire diversity section (title, chart, legend) - class added in SchoolCard.jsx */
#results-output-cards .list-group-item.school-card-diversity-item {
  /* This LI is a .list-group-item, so it gets base padding.
     py-2 is set in SchoolCard.jsx. list-group-flush handles borders.
     Padding is 0.75rem 1rem from .list-group-item, py-2 is vertical padding.
     border-bottom is handled by .list-group-flush mechanism.
  */
   border-bottom: 1px solid #f0f0f0; /* Explicitly ensure border like other items */
}
#results-output-cards .list-group-item.school-card-diversity-item:last-of-type {
    border-bottom: none; /* Remove border for the last item in the list */
}


/* Title for diversity in the card (the h6 inside .school-card-diversity-item) */
#results-output-cards .school-card-diversity-item span {
  /* font-weight: 600; -- from .fw-bold in component */
  /* font-size: 0.875rem; -- from .small in component */
  color: #555 !important;
  margin-bottom: 0 !important; /* Ensure no extra margin if h6 has it by default */
}

/* Chart container sizing is now directly via inline style in SchoolCard.jsx on the col-auto div.
   e.g., style={{ width: '75px', height: '75px' }}
   The canvas inside DiversityChart.jsx is styled to fill this container (100% width/height).
*/

/* Legend Styles for Card View (targets the <ul class="... diversity-legend-list"> from DiversityLegend.jsx) */
#results-output-cards .school-card-diversity-item ul.diversity-legend-list {
  /* The ul already has Bootstrap classes: list-unstyled mb-0 d-flex flex-wrap justify-content-start */
  /* margin-top: 0.25rem; */ /* Optional small space above legend if the mb-1 on title/chart row isn't enough */
}

/* Legend items (li) within the card's diversity section */
#results-output-cards .school-card-diversity-item ul.diversity-legend-list li {
  /* The li already has: d-flex align-items-center me-2 mb-0 (from DiversityLegend.jsx component) */
  line-height: 1; /* Tighter line-height for card view legend */
}

/* Color swatch (span.legend-color-box) for legend items in card */
#results-output-cards .school-card-diversity-item ul.diversity-legend-list li .legend-color-box {
  /* width & height are from inline styles (10px) in DiversityLegend.jsx, or base .legend-color-box CSS */
  /* Base CSS: width: 10px; height: 10px; border: 1px solid #ccc; margin-right: 0.4rem */
  /* Overrides for card view if needed: */
  /* border: none; */
  /* margin-right: 0.25rem; */ /* Tighter margin if me-1 from component isn't enough */
}

/* Text parts of legend items (span.legend-label, span.legend-value) in card */
#results-output-cards .school-card-diversity-item ul.diversity-legend-list li .legend-label,
#results-output-cards .school-card-diversity-item ul.diversity-legend-list li .legend-value {
  /* font-size: 0.7rem; -- from inline style in DiversityLegend.jsx */
  /* color: #6c757d; -- from .text-muted in DiversityLegend.jsx */
  /* Base styles for .legend-label (flex-grow, overflow) and .legend-value (font-weight) should apply. */
}

/* --- END Card View Styles --- */